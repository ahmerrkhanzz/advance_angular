<div class="ibox">
    <div class="ibox-title m-t-xl">
        <h5>Add Department</h5>
        <div class="ibox-tools">
            <a class="close-link" ng-click="toggleDepartmentAddForm()">
                <i class="fa fa-times"></i>
            </a>
        </div>
    </div>

    <div class="ibox-content">
        <div wave-spinner class="text-right" ng-show="fetchingHistoryLog()"></div>

        <form class="form-horizontal add-department" name="forms.addDepartmentForm" novalidate>
            <div class="form-group" ng-if="DepartmentOverviewController.isInstitutionSelected()">
                <label class="control-label col-sm-5 col-md-4">Institution Name *</label>
                <div class="col-sm-7 col-md-8">
                    <input type="text" class="form-control"
                           ng-model="DepartmentOverviewController.institution.selected.name"
                           ng-disabled="true">
                </div>
            </div>

            <div class="form-group" ng-class="{'has-errors': isInvalidNewDepartmentName}">
                <label class="control-label col-sm-5 col-md-4">
                    Department Name *
                </label>
                <div class="col-sm-7 col-md-8">
                    <input type="text"
                        placeholder="Add name"
                        ng-model="newDepartment.name"
                        class="form-control"
                        ng-required="true"
                        focus-delay="250"
                        custom-popover
                        popover-html="Add a department name"
                        popover-placement="left"
                        popover-trigger="manual"
                        popover-visibility="{{isInvalidNewDepartmentName ? true : false}}"
                        ng-focus="setIsInvalidNewDepartmentName(false)" />
                </div>
            </div>

            <div class="form-group" ng-class="{'has-errors': isInvalidNewBelongsTo}">
                <label class="control-label col-sm-5 col-md-4">Belongs to *</label>
                <div class="col-sm-7 col-md-8">
                    <ui-select
                        ng-model="newDepartment.belongsTo"
                        theme="bootstrap"
                        focus-delay="250"
                        custom-popover popover-html="Select an option"
                        popover-placement="left"
                        popover-trigger="manual"
                        popover-visibility="{{isInvalidNewBelongsTo ? true : false}}"
                        on-select="setIsInvalidNewBelongsTo(false)">
                        <ui-select-match placeholder="Select an option">
                            <i class="fa fa-building"></i>
                            <span>{{$select.selected.title}}</span>
                        </ui-select-match>
                        <ui-select-choices
                          position="down"
                          repeat="option.id as option in belongsToList | filter: $select.search">
                          <div class="test" ng-bind-html="option.title | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>

            <div class="white-space"></div>

            <div class="form-group">
                <div class="col-sm-12">
                    <a class="btn btn-primary pull-right" ng-class="{'disabled': addInProgress}" ng-click="handleDepartmentCreateClick()">
                        <i class="fa fa-check-circle"></i>
                        <span>Save</span>
                    </a>
                    <a class="btn btn-default pull-right" ng-click="toggleDepartmentAddForm()">
                        <i class="fa fa-ban"></i>
                        <span>Cancel</span>
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>
